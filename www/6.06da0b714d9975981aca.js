(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"5F+P":function(t,o,n){"use strict";n.d(o,"a",(function(){return l}));var e=n("mrSG"),r=n("UxYa"),i=n("fXoL"),a=n("TEn/"),u=n("ri4K"),c=n("ohih"),s=n("ofXK");function p(t,o){1&t&&(i.Kb(0,"div",10),i.Ib(1,"ion-spinner",0),i.Jb())}function g(t,o){1&t&&(i.Kb(0,"span"),i.pc(1,"s"),i.Jb())}function b(t,o){if(1&t){var n=i.Lb();i.Kb(0,"ion-item"),i.Kb(1,"ion-label",11),i.Kb(2,"h2"),i.pc(3),i.Jb(),i.Kb(4,"p"),i.pc(5),i.oc(6,g,2,0,"span",12),i.Jb(),i.Jb(),i.Kb(7,"ion-button",13),i.Sb("click",(function(){i.ic(n);var t=o.$implicit;return i.Wb().joinGroup(t)})),i.pc(8," Join "),i.Jb(),i.Jb()}if(2&t){var e=o.$implicit;i.xb(3),i.qc(e.name),i.xb(2),i.rc(" ",e.participants.length," participant"),i.xb(1),i.Zb("ngIf",1!==e.participants.length)}}function f(t,o){if(1&t){var n=i.Lb();i.Kb(0,"div",14),i.Kb(1,"ion-button",2),i.Sb("click",(function(){return i.ic(n),i.Wb().loadMoreGroups()})),i.pc(2),i.Jb(),i.Jb()}if(2&t){var e=i.Wb();i.xb(2),i.rc("Load More (+",e.groups.count-50*e.page,")")}}var l=function(){function t(t,o,n,e,r,i,a){this.loadingController=t,this.alertController=o,this.modalController=n,this.navController=e,this.authenticationService=r,this.navParams=i,this.groupService=a,this.groups={data:[],count:0},this.loading=!0,this.search="",this.page=1,this.getGroups()}return t.prototype.ngOnInit=function(){},t.prototype.getGroups=function(){var t=this;this.groupService.getGroups(this.search,this.page).then((function(o){t.groups=o,t.loading=!1})).catch((function(){t.loading=!1}))},t.prototype.loadMoreGroups=function(){var t=this;this.page+=1,this.groupService.getGroups(this.search,this.page).then((function(o){t.groups.data.concat(o.data)}))},t.prototype.doSearch=function(){this.page=1,this.getGroups()},t.prototype.createGroup=function(){return Object(e.a)(this,void 0,void 0,(function(){var t,o=this;return Object(e.c)(this,(function(n){switch(n.label){case 0:return[4,this.modalController.create({component:r.a,componentProps:{}})];case 1:return(t=n.sent()).onDidDismiss().then((function(t){t&&t.data&&t.data.deleted?o.groupService.deleteGroup(t.data.deleted).then((function(){o.modalController.dismiss({updated:!0})})):t&&t.data&&o.groupService.createGroup(t.data.group).then((function(t){o.join(t.id)}))})),[4,t.present()];case 2:return n.sent(),[2]}}))}))},t.prototype.joinGroup=function(t){var o=this;this.groupService.joinGroup(t.id).then((function(){o.join(t.id)}))},t.prototype.join=function(t){this.modalController.dismiss({group_id:t})},t.prototype.dismiss=function(){this.modalController.dismiss()},t.\u0275fac=function(o){return new(o||t)(i.Hb(a.I),i.Hb(a.a),i.Hb(a.K),i.Hb(a.L),i.Hb(u.a),i.Hb(a.M),i.Hb(c.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-join-group"]],decls:15,vars:3,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],["slot","end"],[1,"join-group"],["class","join-group__loading",4,"ngIf"],[1,"join-group__list"],[4,"ngFor","ngForOf"],["class","join_group__load-more",4,"ngIf"],[1,"join-group__loading"],[1,"ion-text-wrap"],[4,"ngIf"],["slot","end",3,"click"],[1,"join_group__load-more"]],template:function(t,o){1&t&&(i.Kb(0,"ion-header"),i.Kb(1,"ion-toolbar",0),i.Kb(2,"ion-buttons",1),i.Kb(3,"ion-button",2),i.Sb("click",(function(){return o.dismiss()})),i.Ib(4,"ion-icon",3),i.Jb(),i.Jb(),i.Kb(5,"ion-title"),i.pc(6,"Join Group"),i.Jb(),i.Kb(7,"ion-buttons",4),i.Kb(8,"ion-button",2),i.Sb("click",(function(){return o.createGroup()})),i.pc(9," Create Group "),i.Jb(),i.Jb(),i.Jb(),i.Jb(),i.Kb(10,"ion-content",5),i.oc(11,p,2,0,"div",6),i.Kb(12,"ion-list",7),i.oc(13,b,9,3,"ion-item",8),i.Jb(),i.oc(14,f,3,1,"div",9),i.Jb()),2&t&&(i.xb(11),i.Zb("ngIf",o.loading),i.xb(2),i.Zb("ngForOf",o.groups.data),i.xb(1),i.Zb("ngIf",o.groups.count>50*o.page))},directives:[a.o,a.F,a.h,a.g,a.p,a.E,a.k,s.j,a.u,s.i,a.C,a.r,a.t],styles:[".join-group[_ngcontent-%COMP%]   .join-group__loading[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:60px;text-align:center}.join-group[_ngcontent-%COMP%]   .join-group__loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto;width:30px;height:30px}"]}),t}()},UxYa:function(t,o,n){"use strict";n.d(o,"a",(function(){return l}));var e=n("AytR"),r=n("fXoL"),i=n("tyNb"),a=n("B7Rs"),u=n("a/9d"),c=n("TEn/"),s=n("ri4K"),p=n("ofXK"),g=n("3Pt+");function b(t,o){1&t&&r.Ib(0,"ion-icon",16)}function f(t,o){if(1&t&&(r.Kb(0,"ion-avatar",17),r.Ib(1,"img",18),r.Jb()),2&t){var n=r.Wb();r.xb(1),r.Zb("src",n.group.image,r.kc)}}var l=function(){function t(t,o,n,e,r,i,a,u,c){this.router=t,this.transfer=o,this.camera=n,this.loadingController=e,this.alertController=r,this.modalController=i,this.navController=a,this.authenticationService=u,this.navParams=c,this.group={}}return t.prototype.ngOnInit=function(){},t.prototype.dismiss=function(){this.modalController.dismiss()},t.prototype.changeImage=function(){var t=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then((function(o){var n;t.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then((function(t){n=t,t.present()}));var r=t.transfer.create(),i={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};r.upload(o,encodeURI(e.a.apiUrl+"/upload"),i).then((function(o){if(o.response){var e=JSON.parse(o.response);t.group.image=e.file}n.dismiss()}),(function(o){t.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(o),buttons:[{text:"Dismiss",role:"cancel"}]}).then((function(t){t.present()})),n.dismiss()}))}),(function(t){}))},t.prototype.save=function(){this.modalController.dismiss({group:this.group})},t.\u0275fac=function(o){return new(o||t)(r.Hb(i.g),r.Hb(a.a),r.Hb(u.a),r.Hb(c.I),r.Hb(c.a),r.Hb(c.K),r.Hb(c.L),r.Hb(s.a),r.Hb(c.M))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-create-group"]],decls:29,vars:5,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"create-group"],[1,"create-group__form"],[1,"create-group__form__avatar"],["name","people",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary",3,"click"],["position","floating"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["slot","end",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"create-group-footer"],["color","primary","expand","full",1,"create-group-footer__button",3,"click"],["name","people"],["item-start",""],[3,"src"]],template:function(t,o){1&t&&(r.Kb(0,"ion-header"),r.Kb(1,"ion-toolbar",0),r.Kb(2,"ion-buttons",1),r.Kb(3,"ion-button",2),r.Sb("click",(function(){return o.dismiss()})),r.Ib(4,"ion-icon",3),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.pc(6,"Create Group"),r.Jb(),r.Jb(),r.Jb(),r.Kb(7,"ion-content",4),r.Kb(8,"ion-list",5),r.Kb(9,"ion-item",6),r.oc(10,b,1,0,"ion-icon",7),r.oc(11,f,2,1,"ion-avatar",8),r.Kb(12,"ion-button",9),r.Sb("click",(function(){return o.changeImage()})),r.pc(13,"Select Photo"),r.Jb(),r.Jb(),r.Kb(14,"ion-item"),r.Kb(15,"ion-label",10),r.pc(16,"Name"),r.Jb(),r.Kb(17,"ion-input",11),r.Sb("ngModelChange",(function(t){return o.group.name=t})),r.Jb(),r.Jb(),r.Kb(18,"ion-item"),r.Kb(19,"ion-label"),r.pc(20,"Public"),r.Jb(),r.Kb(21,"ion-checkbox",12),r.Sb("ngModelChange",(function(t){return o.group.public=t})),r.Jb(),r.Jb(),r.Kb(22,"ion-item"),r.Kb(23,"ion-label",10),r.pc(24,"Description"),r.Jb(),r.Kb(25,"ion-textarea",13),r.Sb("ngModelChange",(function(t){return o.group.description=t})),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(26,"ion-footer",14),r.Kb(27,"ion-button",15),r.Sb("click",(function(){return o.save()})),r.pc(28," Create "),r.Jb(),r.Jb()),2&t&&(r.xb(10),r.Zb("ngIf",!o.group.image),r.xb(1),r.Zb("ngIf",o.group.image),r.xb(6),r.Zb("ngModel",o.group.name),r.xb(4),r.Zb("ngModel",o.group.public),r.xb(4),r.Zb("ngModel",o.group.description))},directives:[c.o,c.F,c.h,c.g,c.p,c.E,c.k,c.u,c.r,p.j,c.t,c.q,c.Q,g.e,g.h,c.i,c.b,c.D,c.n,c.d],styles:[".create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#000;color:#fff;margin-bottom:5px}.create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:5px}.create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px}"]}),t}()},ohih:function(t,o,n){"use strict";n.d(o,"a",(function(){return c}));var e=n("AytR"),r=n("2Vo4"),i=n("fXoL"),a=n("tk/3"),u=n("e8h1"),c=function(){function t(t,o){this.http=t,this.storage=o,this.currentGroup=new r.a({})}return t.prototype.getGroups=function(t,o){var n=this;return new Promise((function(r,i){n.storage.get("go_token").then((function(a){a?n.http.get(e.a.apiUrl+"/groups?token="+a+"&page="+o+"&search="+t).subscribe((function(t){n.storage.set("go_groups",t),r(t)}),(function(t){n.storage.get("go_groups").then((function(o){o?r(o):i(t)}))})):i()}))}))},t.prototype.getJoinedGroups=function(){var t=this;return new Promise((function(o,n){t.storage.get("go_token").then((function(r){r?t.http.get(e.a.apiUrl+"/groups?token="+r+"&joined=1").subscribe((function(n){t.storage.set("go_joinedgroups",n),o(n)}),(function(e){t.storage.get("go_joinedgroups").then((function(t){t?o(t):n(e)}))})):n()}))}))},t.prototype.getInvitedGroups=function(){var t=this;return new Promise((function(o,n){t.storage.get("go_token").then((function(r){r?t.http.get(e.a.apiUrl+"/groups?token="+r+"&invited=1").subscribe((function(n){t.storage.set("go_invitedgroups",n),o(n)}),(function(e){t.storage.get("go_invitedgroups").then((function(t){t?o(t):n(e)}))})):n()}))}))},t.prototype.getGroup=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.get(e.a.apiUrl+"/groups/"+t+"?token="+i).subscribe((function(e){o.storage.set("go_group"+t,e),n(e)}),(function(e){o.storage.get("go_group"+t).then((function(t){t?n(t):r(e)}))})):r()}))}))},t.prototype.createGroup=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.post(e.a.apiUrl+"/groups?token="+i,t).subscribe((function(t){n(t)}),(function(t){r(t)})):r()}))}))},t.prototype.editGroup=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.put(e.a.apiUrl+"/groups/"+t.id+"?token="+i,t).subscribe((function(t){n(t)}),(function(t){r(t)})):r()}))}))},t.prototype.deleteGroup=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.delete(e.a.apiUrl+"/groups/"+t+"?token="+i).subscribe((function(t){n(t)}),(function(t){r(t)})):r()}))}))},t.prototype.joinGroup=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.post(e.a.apiUrl+"/joingroup?token="+i,{group_id:t}).subscribe((function(t){n(t)}),(function(t){r(t)})):r()}))}))},t.prototype.inviteUser=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.post(e.a.apiUrl+"/invitegroup?token="+i,t).subscribe((function(t){n(t)}),(function(t){r(t)})):r()}))}))},t.prototype.leaveGroup=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.post(e.a.apiUrl+"/leavegroup?token="+i,{group_id:t}).subscribe((function(t){n(t)}),(function(t){r(t)})):r()}))}))},t.prototype.getMessages=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.get(e.a.apiUrl+"/groupmessages/"+t+"?token="+i).subscribe((function(e){o.storage.set("go_messages"+t,e),n(e)}),(function(e){o.storage.get("go_messages"+t).then((function(t){t?n(t):r(e)}))})):r()}))}))},t.prototype.createMessage=function(t){var o=this;return new Promise((function(n,r){o.storage.get("go_token").then((function(i){i?o.http.post(e.a.apiUrl+"/groupmessages?token="+i,t).subscribe((function(t){n(t)}),(function(t){r(t)})):r()}))}))},t.prototype.subscribeCurrentGroup=function(){return this.currentGroup.asObservable()},t.prototype.getCurrentGroup=function(){var t=this;return new Promise((function(o,n){t.storage.get("go_currentgroup").then((function(t){t?o(t):n()}))}))},t.prototype.setCurrentGroup=function(t){this.storage.set("go_currentgroup",t),this.currentGroup.next(t)},t.\u0275fac=function(o){return new(o||t)(i.Ob(a.a),i.Ob(u.b))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);