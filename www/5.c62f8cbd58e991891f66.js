(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"5F+P":function(n,t,o){"use strict";o.d(t,"a",(function(){return _}));var e=o("mrSG"),i=o("UxYa"),r=o("fXoL"),s=o("TEn/"),c=o("ri4K"),a=o("ohih"),g=o("ofXK");function u(n,t){1&n&&(r.Kb(0,"div",10),r.Ib(1,"ion-spinner",0),r.Jb())}function p(n,t){1&n&&(r.Kb(0,"span"),r.lc(1,"s"),r.Jb())}function l(n,t){if(1&n){var o=r.Lb();r.Kb(0,"ion-item"),r.Kb(1,"ion-label",11),r.Kb(2,"h2"),r.lc(3),r.Jb(),r.Kb(4,"p"),r.lc(5),r.kc(6,p,2,0,"span",12),r.Jb(),r.Jb(),r.Kb(7,"ion-button",13),r.Sb("click",(function(){r.ec(o);var n=t.$implicit;return r.Ub().joinGroup(n)})),r.lc(8," Join "),r.Jb(),r.Jb()}if(2&n){var e=t.$implicit;r.xb(3),r.mc(e.name),r.xb(2),r.nc(" ",e.participants.length," participant"),r.xb(1),r.Xb("ngIf",1!==e.participants.length)}}function b(n,t){if(1&n){var o=r.Lb();r.Kb(0,"div",14),r.Kb(1,"ion-button",2),r.Sb("click",(function(){return r.ec(o),r.Ub().loadMoreGroups()})),r.lc(2),r.Jb(),r.Jb()}if(2&n){var e=r.Ub();r.xb(2),r.nc("Load More (+",e.groups.count-50*e.page,")")}}var _=function(){function n(n,t,o,e,i,r,s){this.loadingController=n,this.alertController=t,this.modalController=o,this.navController=e,this.authenticationService=i,this.navParams=r,this.groupService=s,this.groups={data:[],count:0},this.loading=!0,this.search="",this.page=1,this.getGroups()}return n.prototype.ngOnInit=function(){},n.prototype.getGroups=function(){var n=this;this.groupService.getGroups(this.search,this.page).then((function(t){n.groups=t,n.loading=!1})).catch((function(){n.loading=!1}))},n.prototype.loadMoreGroups=function(){var n=this;this.page+=1,this.groupService.getGroups(this.search,this.page).then((function(t){n.groups.data.concat(t.data)}))},n.prototype.doSearch=function(){this.page=1,this.getGroups()},n.prototype.createGroup=function(){return Object(e.a)(this,void 0,void 0,(function(){var n,t=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,this.modalController.create({component:i.a,componentProps:{}})];case 1:return(n=o.sent()).onDidDismiss().then((function(n){n&&n.data&&t.groupService.createGroup(n.data.group).then((function(n){t.join(n.id)}))})),[4,n.present()];case 2:return o.sent(),[2]}}))}))},n.prototype.joinGroup=function(n){var t=this;this.groupService.joinGroup(n.id).then((function(){t.join(n.id)}))},n.prototype.join=function(n){this.modalController.dismiss({group_id:n})},n.prototype.dismiss=function(){this.modalController.dismiss()},n.\u0275fac=function(t){return new(t||n)(r.Hb(s.J),r.Hb(s.a),r.Hb(s.L),r.Hb(s.M),r.Hb(c.a),r.Hb(s.N),r.Hb(a.a))},n.\u0275cmp=r.Bb({type:n,selectors:[["app-join-group"]],decls:15,vars:3,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],["slot","end"],[1,"join-group"],["class","join-group__loading",4,"ngIf"],[1,"join-group__list"],[4,"ngFor","ngForOf"],["class","join_group__load-more",4,"ngIf"],[1,"join-group__loading"],[1,"ion-text-wrap"],[4,"ngIf"],["slot","end",3,"click"],[1,"join_group__load-more"]],template:function(n,t){1&n&&(r.Kb(0,"ion-header"),r.Kb(1,"ion-toolbar",0),r.Kb(2,"ion-buttons",1),r.Kb(3,"ion-button",2),r.Sb("click",(function(){return t.dismiss()})),r.Ib(4,"ion-icon",3),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.lc(6,"Join Group"),r.Jb(),r.Kb(7,"ion-buttons",4),r.Kb(8,"ion-button",2),r.Sb("click",(function(){return t.createGroup()})),r.lc(9," Create Group "),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(10,"ion-content",5),r.kc(11,u,2,0,"div",6),r.Kb(12,"ion-list",7),r.kc(13,l,9,3,"ion-item",8),r.Jb(),r.kc(14,b,3,1,"div",9),r.Jb()),2&n&&(r.xb(11),r.Xb("ngIf",t.loading),r.xb(2),r.Xb("ngForOf",t.groups.data),r.xb(1),r.Xb("ngIf",t.groups.count>50*t.page))},directives:[s.o,s.G,s.h,s.g,s.p,s.F,s.k,g.j,s.u,g.i,s.D,s.r,s.t],styles:[".join-group[_ngcontent-%COMP%]   .join-group__loading[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:60px;text-align:center}.join-group[_ngcontent-%COMP%]   .join-group__loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto;width:30px;height:30px}"]}),n}()},KXRs:function(n,t,o){"use strict";o.d(t,"a",(function(){return b}));var e=o("mrSG"),i=o("OSM0"),r=o("fXoL"),s=o("TEn/"),c=o("ri4K"),a=o("ohih"),g=o("ofXK");function u(n,t){1&n&&(r.Kb(0,"div",9),r.Ib(1,"ion-spinner",0),r.Jb())}function p(n,t){1&n&&(r.Kb(0,"span"),r.lc(1,"s"),r.Jb())}function l(n,t){if(1&n){var o=r.Lb();r.Kb(0,"ion-item"),r.Kb(1,"ion-label",10),r.Kb(2,"h2"),r.lc(3),r.Jb(),r.Kb(4,"p"),r.lc(5),r.kc(6,p,2,0,"span",11),r.Jb(),r.Jb(),r.Kb(7,"ion-button",12),r.Sb("click",(function(){r.ec(o);var n=t.$implicit;return r.Ub().joinGroup(n)})),r.lc(8," Join "),r.Jb(),r.Jb()}if(2&n){var e=t.$implicit;r.xb(3),r.mc(e.name),r.xb(2),r.nc(" ",e.participants.length," participant"),r.xb(1),r.Xb("ngIf",1!==e.participants.length)}}var b=function(){function n(n,t,o,e,i,r,s,c){this.loadingController=n,this.alertController=t,this.modalController=o,this.navController=e,this.authenticationService=i,this.navParams=r,this.groupService=s,this.toastController=c,this.groups=[],this.loading=!0,this.getInvites()}return n.prototype.ngOnInit=function(){},n.prototype.getInvites=function(){var n=this;this.groupService.getInvitedGroups().then((function(t){n.groups=t,n.loading=!1})).catch((function(){n.loading=!1}))},n.prototype.joinGroup=function(n){var t=this;this.groupService.joinGroup(n.id).then((function(){t.join(n.id)}))},n.prototype.join=function(n){this.modalController.dismiss({group_id:n})},n.prototype.dismiss=function(){this.modalController.dismiss()},n.prototype.inviteUser=function(){return Object(e.a)(this,void 0,void 0,(function(){var n,t=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,this.modalController.create({component:i.a,componentProps:{}})];case 1:return(n=o.sent()).onDidDismiss().then((function(n){n&&n.data&&t.groupService.inviteUser(n.data.user).then((function(){t.showToast("Invitation sent!")}))})),[4,n.present()];case 2:return o.sent(),[2]}}))}))},n.prototype.showToast=function(n){return Object(e.a)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return[4,this.toastController.create({message:n,duration:2e3})];case 1:return t.sent().present(),[2]}}))}))},n.\u0275fac=function(t){return new(t||n)(r.Hb(s.J),r.Hb(s.a),r.Hb(s.L),r.Hb(s.M),r.Hb(c.a),r.Hb(s.N),r.Hb(a.a),r.Hb(s.S))},n.\u0275cmp=r.Bb({type:n,selectors:[["app-group-invites"]],decls:14,vars:2,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],["slot","end"],[1,"group-invites"],["class","group-invites__loading",4,"ngIf"],[1,"group-invites__list"],[4,"ngFor","ngForOf"],[1,"group-invites__loading"],[1,"ion-text-wrap"],[4,"ngIf"],["slot","end",3,"click"]],template:function(n,t){1&n&&(r.Kb(0,"ion-header"),r.Kb(1,"ion-toolbar",0),r.Kb(2,"ion-buttons",1),r.Kb(3,"ion-button",2),r.Sb("click",(function(){return t.dismiss()})),r.Ib(4,"ion-icon",3),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.lc(6,"Pending Invitations"),r.Jb(),r.Kb(7,"ion-buttons",4),r.Kb(8,"ion-button",2),r.Sb("click",(function(){return t.inviteUser()})),r.lc(9," Invite User "),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(10,"ion-content",5),r.kc(11,u,2,0,"div",6),r.Kb(12,"ion-list",7),r.kc(13,l,9,3,"ion-item",8),r.Jb(),r.Jb()),2&n&&(r.xb(11),r.Xb("ngIf",t.loading),r.xb(2),r.Xb("ngForOf",t.groups))},directives:[s.o,s.G,s.h,s.g,s.p,s.F,s.k,g.j,s.u,g.i,s.D,s.r,s.t],styles:[".group-invites[_ngcontent-%COMP%]   .group-invites__loading[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:60px;text-align:center}.group-invites[_ngcontent-%COMP%]   .group-invites__loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto;width:30px;height:30px}"]}),n}()},OSM0:function(n,t,o){"use strict";o.d(t,"a",(function(){return g}));var e=o("fXoL"),i=o("TEn/"),r=o("ohih"),s=o("3Pt+"),c=o("ofXK");function a(n,t){if(1&n&&(e.Kb(0,"ion-select-option",11),e.lc(1),e.Jb()),2&n){var o=t.$implicit;e.Xb("value",o.id),e.xb(1),e.mc(o.name)}}var g=function(){function n(n,t){var o=this;this.modalController=n,this.groupService=t,this.user={},this.groups=[],this.groupService.getJoinedGroups().then((function(n){o.groups=n}))}return n.prototype.ngOnInit=function(){},n.prototype.dismiss=function(){this.modalController.dismiss()},n.prototype.invite=function(){this.modalController.dismiss({user:this.user})},n.\u0275fac=function(t){return new(t||n)(e.Hb(i.L),e.Hb(r.a))},n.\u0275cmp=e.Bb({type:n,selectors:[["app-invite-user"]],decls:20,vars:3,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"invite-user"],["position","floating"],["type","text","name","email",3,"ngModel","ngModelChange"],["name","group",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"invite-user-footer"],["color","primary","expand","full",1,"invite-user-footer__button",3,"click"],[3,"value"]],template:function(n,t){1&n&&(e.Kb(0,"ion-header"),e.Kb(1,"ion-toolbar",0),e.Kb(2,"ion-buttons",1),e.Kb(3,"ion-button",2),e.Sb("click",(function(){return t.dismiss()})),e.Ib(4,"ion-icon",3),e.Jb(),e.Jb(),e.Kb(5,"ion-title"),e.lc(6,"Invite User"),e.Jb(),e.Jb(),e.Jb(),e.Kb(7,"ion-content",4),e.Kb(8,"ion-item"),e.Kb(9,"ion-label",5),e.lc(10,"Email"),e.Jb(),e.Kb(11,"ion-input",6),e.Sb("ngModelChange",(function(n){return t.user.email=n})),e.Jb(),e.Jb(),e.Kb(12,"ion-item"),e.Kb(13,"ion-label",5),e.lc(14,"Group"),e.Jb(),e.Kb(15,"ion-select",7),e.Sb("ngModelChange",(function(n){return t.user.group_id=n})),e.kc(16,a,2,2,"ion-select-option",8),e.Jb(),e.Jb(),e.Jb(),e.Kb(17,"ion-footer",9),e.Kb(18,"ion-button",10),e.Sb("click",(function(){return t.invite()})),e.lc(19," Invite "),e.Jb(),e.Jb()),2&n&&(e.xb(11),e.Xb("ngModel",t.user.email),e.xb(4),e.Xb("ngModel",t.user.group_id),e.xb(1),e.Xb("ngForOf",t.groups))},directives:[i.o,i.G,i.h,i.g,i.p,i.F,i.k,i.r,i.t,i.q,i.R,s.d,s.g,i.B,i.Q,c.i,i.n,i.C],styles:[""]}),n}()},OcId:function(n,t,o){"use strict";o.d(t,"a",(function(){return I}));var e=o("mrSG"),i=o("5F+P"),r=o("yPcR"),s=o("uxLX"),c=o("KXRs"),a=o("fXoL"),g=o("ohih"),u=o("ri4K"),p=o("TEn/"),l=o("ofXK"),b=o("3Pt+"),_=function(n){return{"group__groups-list__group--active":n}},d=function(n){return{"background-image":n}};function h(n,t){if(1&n){var o=a.Lb();a.Kb(0,"div",11),a.Sb("click",(function(){a.ec(o);var n=t.$implicit;return a.Ub().selectGroup(n)})),a.Ib(1,"div",16),a.Kb(2,"div",10),a.lc(3),a.Jb(),a.Jb()}if(2&n){var e=t.$implicit,i=a.Ub();a.Xb("ngClass",a.ac(3,_,i.selectedGroup.id===e.id)),a.xb(1),a.Xb("ngStyle",a.ac(5,d,"url("+e.image+")")),a.xb(2),a.mc(e.name)}}function m(n,t){1&n&&(a.Kb(0,"div",17),a.Ib(1,"ion-spinner",0),a.Jb())}function f(n,t){if(1&n){var o=a.Lb();a.Kb(0,"ion-item",30),a.Sb("click",(function(){a.ec(o);var n=t.$implicit;return a.Ub(4).selectLayer(n)})),a.lc(1),a.Jb()}if(2&n){var e=t.$implicit;a.xb(1),a.nc(" ",e.layer.name," ")}}function v(n,t){if(1&n&&(a.Kb(0,"ion-list"),a.kc(1,f,2,1,"ion-item",29),a.Jb()),2&n){var o=a.Ub(3);a.xb(1),a.Xb("ngForOf",o.selectedGroup.layers)}}function C(n,t){if(1&n&&(a.Kb(0,"div",27),a.Kb(1,"div",28),a.kc(2,v,2,1,"ion-list",15),a.Jb(),a.Jb()),2&n){var o=a.Ub(2);a.xb(2),a.Xb("ngIf",o.selectedGroup.layers&&o.selectedGroup.layers.length>0)}}function M(n,t){1&n&&(a.Kb(0,"span"),a.lc(1,", "),a.Jb())}function O(n,t){if(1&n){var o=a.Lb();a.Kb(0,"span"),a.Kb(1,"a",2),a.Sb("click",(function(){a.ec(o);var n=t.$implicit;return a.Ub(3).openProfile(n.user_id)})),a.lc(2),a.Jb(),a.kc(3,M,2,0,"span",15),a.Jb()}if(2&n){var e=t.$implicit,i=t.last;a.xb(2),a.mc(e.profile.name),a.xb(1),a.Xb("ngIf",!i)}}function P(n,t){if(1&n){var o=a.Lb();a.Kb(0,"div",27),a.Kb(1,"div",31),a.kc(2,O,4,2,"span",32),a.Kb(3,"ion-button",33),a.Sb("click",(function(){a.ec(o);var n=a.Ub(2);return n.leaveGroup(n.selectedGroup.id)})),a.lc(4,"Leave Group"),a.Jb(),a.Jb(),a.Jb()}if(2&n){var e=a.Ub(2);a.xb(2),a.Xb("ngForOf",e.selectedGroup.participants)}}var x=function(n,t){return{"message--to":n,"message--from":t}};function J(n,t){if(1&n){var o=a.Lb();a.Kb(0,"div",38),a.Kb(1,"div",39),a.lc(2),a.Jb(),a.Kb(3,"a",40),a.Sb("click",(function(){a.ec(o);var n=t.$implicit;return a.Ub(3).openProfile(n.user_id)})),a.lc(4),a.Jb(),a.Jb()}if(2&n){var e=t.$implicit,i=a.Ub(3);a.Xb("ngClass",a.bc(3,x,i.user.id===e.user_id,i.user.id!==e.user_id)),a.xb(2),a.nc(" ",e.message," "),a.xb(2),a.nc(" ",e.profile.name," ")}}function K(n,t){if(1&n){var o=a.Lb();a.Kb(0,"div",41),a.Kb(1,"ion-item"),a.Kb(2,"ion-label",42),a.lc(3,"Send a message"),a.Jb(),a.Kb(4,"ion-textarea",43),a.Sb("ngModelChange",(function(n){return a.ec(o),a.Ub(3).message.message=n})),a.Jb(),a.Jb(),a.Kb(5,"ion-button",33),a.Sb("click",(function(){return a.ec(o),a.Ub(3).createMessage()})),a.lc(6," Send "),a.Jb(),a.Jb()}if(2&n){var e=a.Ub(3);a.xb(4),a.Xb("ngModel",e.message.message)}}function y(n,t){if(1&n&&(a.Kb(0,"div",34),a.Kb(1,"div",35),a.kc(2,J,5,6,"div",36),a.Jb(),a.kc(3,K,7,1,"div",37),a.Jb()),2&n){var o=a.Ub(2);a.xb(2),a.Xb("ngForOf",o.messages),a.xb(1),a.Xb("ngIf",o.user&&o.user.id)}}function k(n,t){if(1&n){var o=a.Lb();a.Kb(0,"div"),a.Kb(1,"div",18),a.Kb(2,"div",19),a.Sb("click",(function(){a.ec(o);var n=a.Ub();return n.editGroup(n.selectedGroup)})),a.Jb(),a.Kb(3,"div",20),a.Sb("click",(function(){a.ec(o);var n=a.Ub();return n.editGroup(n.selectedGroup)})),a.Kb(4,"h3"),a.lc(5,"Current Group"),a.Jb(),a.Kb(6,"h2"),a.lc(7),a.Jb(),a.Kb(8,"p"),a.lc(9),a.Jb(),a.Jb(),a.Jb(),a.Kb(10,"ion-segment",21),a.Sb("ngModelChange",(function(n){return a.ec(o),a.Ub().activeTab=n})),a.Kb(11,"ion-segment-button",22),a.Kb(12,"ion-label"),a.lc(13,"Layers"),a.Jb(),a.Jb(),a.Kb(14,"ion-segment-button",23),a.Kb(15,"ion-label"),a.lc(16,"Members"),a.Jb(),a.Jb(),a.Kb(17,"ion-segment-button",24),a.Kb(18,"ion-label"),a.lc(19,"Chat"),a.Jb(),a.Jb(),a.Jb(),a.kc(20,C,3,1,"div",25),a.kc(21,P,5,1,"div",25),a.kc(22,y,4,2,"div",26),a.Jb()}if(2&n){var e=a.Ub();a.xb(2),a.Xb("ngStyle",a.ac(7,d,"url("+e.selectedGroup.image+")")),a.xb(5),a.mc(e.selectedGroup.name),a.xb(2),a.mc(e.selectedGroup.description),a.xb(1),a.Xb("ngModel",e.activeTab),a.xb(10),a.Xb("ngIf","layers"===e.activeTab),a.xb(1),a.Xb("ngIf","members"===e.activeTab),a.xb(1),a.Xb("ngIf","chat"===e.activeTab)}}var I=function(){function n(n,t,o,e,i){var r=this;this.groupService=n,this.auth=t,this.modalController=o,this.navParams=e,this.alertController=i,this.user={},this.auth.retreiveUserData().then((function(n){console.log(n),r.user=n})),this.loading=!0,this.groups=[],this.selectedGroup={},this.groupService.getCurrentGroup().then((function(n){n&&(console.log(n),r.selectedGroup=n)})),this.getGroups(),this.messages=[],this.message={},this.activeTab="layers"}return n.prototype.ngOnInit=function(){},n.prototype.ngOnDestroy=function(){this.messageInterval&&clearInterval(this.messageInterval)},n.prototype.groupNavigationChanged=function(n){console.log(n),this.activeTab=n},n.prototype.createMessage=function(){var n=this;if(this.message.message){var t={};Object.assign(t,this.message),t.group_id=this.selectedGroup.id,t.user_id=this.user.id,this.messages.push(t),this.message.message="",this.groupService.createMessage(t).then((function(t){n.message={}}))}},n.prototype.setMessageInterval=function(){var n=this;this.messageInterval&&clearInterval(this.messageInterval),this.messages=[],this.getMessages(),this.messageInterval=setInterval((function(){n.getMessages()}),1e4)},n.prototype.getMessages=function(){var n=this;this.selectedGroup&&this.selectedGroup.id&&this.groupService.getMessages(this.selectedGroup.id).then((function(t){n.messages=t}))},n.prototype.getGroups=function(){var n=this;this.groupService.getJoinedGroups().then((function(t){n.groups=t,!n.selectedGroup.id&&n.groups.length>0||n.selectedGroup.id&&n.setMessageInterval(),n.loading=!1})).catch((function(){n.loading=!1}))},n.prototype.selectPrivate=function(){this.selectedGroup={},this.groupService.setCurrentGroup({}),this.messageInterval&&clearInterval(this.messageInterval)},n.prototype.selectGroup=function(n){this.activeTab="layers",this.selectedGroup=n,this.groupService.setCurrentGroup(n),this.setMessageInterval()},n.prototype.joinGroup=function(){return Object(e.a)(this,void 0,void 0,(function(){var n,t=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,this.modalController.create({component:i.a,componentProps:{}})];case 1:return(n=o.sent()).onDidDismiss().then((function(n){n&&n.data&&t.groupService.getJoinedGroups().then((function(o){var i,r;t.groups=o;try{for(var s=Object(e.d)(t.groups),c=s.next();!c.done;c=s.next()){var a=c.value;if(a.id===n.data.group_id){t.selectedGroup=a;break}}}catch(g){i={error:g}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}))})),[4,n.present()];case 2:return o.sent(),[2]}}))}))},n.prototype.viewInvites=function(){return Object(e.a)(this,void 0,void 0,(function(){var n,t=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,this.modalController.create({component:c.a,componentProps:{}})];case 1:return(n=o.sent()).onDidDismiss().then((function(n){n&&n.data&&t.groupService.getJoinedGroups().then((function(o){var i,r;t.groups=o;try{for(var s=Object(e.d)(t.groups),c=s.next();!c.done;c=s.next()){var a=c.value;if(a.id===n.group_id){t.selectedGroup=a;break}}}catch(g){i={error:g}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}))})),[4,n.present()];case 2:return o.sent(),[2]}}))}))},n.prototype.leaveGroup=function(n){return Object(e.a)(this,void 0,void 0,(function(){var t=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,this.alertController.create({header:"Leave Group",message:"Are you sure?",buttons:[{text:"Cancel",role:"cancel",handler:function(){}},{text:"Yes",handler:function(){t.loading=!0,t.selectedGroup={},t.groupService.leaveGroup(n).then((function(){t.getGroups()}))}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}}))}))},n.prototype.editGroup=function(n){return Object(e.a)(this,void 0,void 0,(function(){var t,o,i=this;return Object(e.c)(this,(function(e){switch(e.label){case 0:return n.user_id!==this.user.id?[2]:(t={},Object.assign(t,n),[4,this.modalController.create({component:r.a,componentProps:{group:t}})]);case 1:return(o=e.sent()).onDidDismiss().then((function(t){t&&t.data&&i.groupService.editGroup(t.data.group).then((function(){Object.assign(n,t.data.group)}))})),[4,o.present()];case 2:return e.sent(),[2]}}))}))},n.prototype.openProfile=function(n){return Object(e.a)(this,void 0,void 0,(function(){var t;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,this.modalController.create({component:s.a,componentProps:{profile:n}})];case 1:return(t=o.sent()).onDidDismiss().then((function(n){})),[4,t.present()];case 2:return o.sent(),[2]}}))}))},n.prototype.selectLayer=function(n){this.modalController.dismiss({selectedLayer:n})},n.prototype.dismiss=function(){this.modalController.dismiss()},n.\u0275fac=function(t){return new(t||n)(a.Hb(g.a),a.Hb(u.a),a.Hb(p.L),a.Hb(p.N),a.Hb(p.a))},n.\u0275cmp=a.Bb({type:n,selectors:[["app-groups"]],decls:24,vars:6,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],["slot","end"],[1,"groups"],[1,"group__groups-list"],[1,"group__groups-list__group","group__groups-list__group--join",3,"click"],[1,"group__groups-list__group__image"],["name","person-add"],[1,"group__groups-list__group__name"],[1,"group__groups-list__group",3,"ngClass","click"],[1,"group__groups-list__group__image","group__groups-list__group__image--private"],["class","group__groups-list__group",3,"ngClass","click",4,"ngFor","ngForOf"],["class","group__loading",4,"ngIf"],[4,"ngIf"],[1,"group__groups-list__group__image",3,"ngStyle"],[1,"group__loading"],[1,"group__header"],[1,"group__image",3,"ngStyle","click"],[1,"group__name",3,"click"],["color","primary",1,"group__navigation",3,"ngModel","ngModelChange"],["value","layers"],["value","members"],["value","chat"],["class","group__details",4,"ngIf"],["class","group__chat",4,"ngIf"],[1,"group__details"],[1,"group__layers"],["lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",3,"click"],[1,"group__members"],[4,"ngFor","ngForOf"],["color","primary",3,"click"],[1,"group__chat"],[1,"group__chat__messages"],["class","group__chat__messages__message message",3,"ngClass",4,"ngFor","ngForOf"],["class","group__chat__send-message",4,"ngIf"],[1,"group__chat__messages__message","message",3,"ngClass"],[1,"message__text"],[1,"message__author",3,"click"],[1,"group__chat__send-message"],["position","floating"],[3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(a.Kb(0,"ion-header"),a.Kb(1,"ion-toolbar",0),a.Kb(2,"ion-buttons",1),a.Kb(3,"ion-button",2),a.Sb("click",(function(){return t.dismiss()})),a.Ib(4,"ion-icon",3),a.Jb(),a.Jb(),a.Kb(5,"ion-title"),a.lc(6,"My Groups"),a.Jb(),a.Kb(7,"ion-buttons",4),a.Kb(8,"ion-button",2),a.Sb("click",(function(){return t.viewInvites()})),a.lc(9," Invites "),a.Jb(),a.Jb(),a.Jb(),a.Jb(),a.Kb(10,"ion-content",5),a.Kb(11,"div",6),a.Kb(12,"div",7),a.Sb("click",(function(){return t.joinGroup()})),a.Kb(13,"div",8),a.Ib(14,"ion-icon",9),a.Jb(),a.Kb(15,"div",10),a.lc(16,"Join Group"),a.Jb(),a.Jb(),a.Kb(17,"div",11),a.Sb("click",(function(){return t.selectPrivate()})),a.Ib(18,"div",12),a.Kb(19,"div",10),a.lc(20,"My Map"),a.Jb(),a.Jb(),a.kc(21,h,4,7,"div",13),a.Jb(),a.kc(22,m,2,0,"div",14),a.kc(23,k,23,9,"div",15),a.Jb()),2&n&&(a.xb(17),a.Xb("ngClass",a.ac(4,_,!t.selectedGroup.id)),a.xb(4),a.Xb("ngForOf",t.groups),a.xb(1),a.Xb("ngIf",t.loading),a.xb(1),a.Xb("ngIf",!t.loading&&t.selectedGroup.id))},directives:[p.o,p.G,p.h,p.g,p.p,p.F,p.k,l.h,l.i,l.j,l.k,p.D,p.z,p.Q,b.d,b.g,p.A,p.t,p.u,p.r,p.E,p.R],styles:[".groups[_ngcontent-%COMP%]   .group__loading[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:60px;text-align:center}.groups[_ngcontent-%COMP%]   .group__loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto;width:50px;height:50px}.groups[_ngcontent-%COMP%]   .group__groups-list[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:30px;white-space:nowrap;overflow-x:scroll}.groups[_ngcontent-%COMP%]   .group__groups-list[_ngcontent-%COMP%]   .group__groups-list__group[_ngcontent-%COMP%]{text-align:center;display:inline-block;margin:0 15px;cursor:pointer}.groups[_ngcontent-%COMP%]   .group__groups-list[_ngcontent-%COMP%]   .group__groups-list__group.group__groups-list__group--active[_ngcontent-%COMP%]   .group__groups-list__group__name[_ngcontent-%COMP%]{font-weight:700}.groups[_ngcontent-%COMP%]   .group__groups-list[_ngcontent-%COMP%]   .group__groups-list__group.group__groups-list__group--join[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:34px;height:34px;font-size:34px;line-height:34px;margin-top:11px;opacity:.2}.groups[_ngcontent-%COMP%]   .group__groups-list[_ngcontent-%COMP%]   .group__groups-list__group[_ngcontent-%COMP%]   .group__groups-list__group__image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:30px;margin:0 auto;background-color:#dcdcdc;background-size:cover;background-position:50%;transition:transform .2s linear}.groups[_ngcontent-%COMP%]   .group__groups-list[_ngcontent-%COMP%]   .group__groups-list__group[_ngcontent-%COMP%]   .group__groups-list__group__image--private[_ngcontent-%COMP%]{background-image:url(/assets/mymap.jpg)}.groups[_ngcontent-%COMP%]   .group__groups-list[_ngcontent-%COMP%]   .group__groups-list__group[_ngcontent-%COMP%]   .group__groups-list__group__name[_ngcontent-%COMP%]{margin-top:5px;max-width:100px;overflow:hidden;text-overflow:ellipsis}.groups[_ngcontent-%COMP%]   .group__header[_ngcontent-%COMP%]{text-align:center;border-top:1px solid rgba(0,0,0,.05);padding-top:30px;margin-bottom:30px}.groups[_ngcontent-%COMP%]   .group__header[_ngcontent-%COMP%]   .group__image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50px;margin:0 auto;background-color:#dcdcdc;background-size:cover;background-position:50%;cursor:pointer}.groups[_ngcontent-%COMP%]   .group__header[_ngcontent-%COMP%]   .group__name[_ngcontent-%COMP%]{cursor:pointer}.groups[_ngcontent-%COMP%]   .group__header[_ngcontent-%COMP%]   .group__name[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;font-weight:400;opacity:.4;margin:15px 0 0}.groups[_ngcontent-%COMP%]   .group__header[_ngcontent-%COMP%]   .group__name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px 0 0}.groups[_ngcontent-%COMP%]   .group__header[_ngcontent-%COMP%]   .group__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:500px;margin:10px auto 0}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]{display:block;width:100%;padding-top:30px;padding-bottom:30px}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]   .group__members[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]   .group__members[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff7f00;text-decoration:underline;cursor:pointer}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]   .group__members[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block;margin-top:15px}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]   .group__layers[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]   .group__layers[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]   .group__layers[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{order:10;flex:1;text-align:right}.groups[_ngcontent-%COMP%]   .group__details[_ngcontent-%COMP%]   .group__layers[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:5px;padding:15px 10px;margin-top:15px}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]{display:block;width:100%;padding:30px 15px}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message__author[_ngcontent-%COMP%]{display:block;font-size:12px;color:#000;text-decoration:none;margin-top:5px;cursor:pointer}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message__text[_ngcontent-%COMP%]{background-color:#ff7f00;padding:10px 20px;display:inline-block;border-radius:10px;color:#fff}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__messages[_ngcontent-%COMP%]   .message.message--from[_ngcontent-%COMP%]{text-align:right}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__messages[_ngcontent-%COMP%]   .message.message--from[_ngcontent-%COMP%]   .message__text[_ngcontent-%COMP%]{background-color:#f1f0f0;color:#000}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__send-message[_ngcontent-%COMP%]{margin-top:30px;border-top:1px solid #e0e0e0;padding-top:15px}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__send-message[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{width:100%;padding-bottom:0}.groups[_ngcontent-%COMP%]   .group__chat[_ngcontent-%COMP%]   .group__chat__send-message[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:20px;width:100%}"]}),n}()},UxYa:function(n,t,o){"use strict";o.d(t,"a",(function(){return _}));var e=o("AytR"),i=o("fXoL"),r=o("tyNb"),s=o("B7Rs"),c=o("a/9d"),a=o("TEn/"),g=o("ri4K"),u=o("ofXK"),p=o("3Pt+");function l(n,t){1&n&&i.Ib(0,"ion-icon",16)}function b(n,t){if(1&n&&(i.Kb(0,"ion-avatar",17),i.Ib(1,"img",18),i.Jb()),2&n){var o=i.Ub();i.xb(1),i.Xb("src",o.group.image,i.gc)}}var _=function(){function n(n,t,o,e,i,r,s,c,a){this.router=n,this.transfer=t,this.camera=o,this.loadingController=e,this.alertController=i,this.modalController=r,this.navController=s,this.authenticationService=c,this.navParams=a,this.group={}}return n.prototype.ngOnInit=function(){},n.prototype.dismiss=function(){this.modalController.dismiss()},n.prototype.changeImage=function(){var n=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then((function(t){var o;n.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then((function(n){o=n,n.present()}));var i=n.transfer.create(),r={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};i.upload(t,encodeURI(e.a.apiUrl+"/upload"),r).then((function(t){if(t.response){var e=JSON.parse(t.response);n.group.image=e.file}o.dismiss()}),(function(t){n.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(t),buttons:[{text:"Dismiss",role:"cancel"}]}).then((function(n){n.present()})),o.dismiss()}))}),(function(n){}))},n.prototype.save=function(){this.modalController.dismiss(this.group)},n.\u0275fac=function(t){return new(t||n)(i.Hb(r.g),i.Hb(s.a),i.Hb(c.a),i.Hb(a.J),i.Hb(a.a),i.Hb(a.L),i.Hb(a.M),i.Hb(g.a),i.Hb(a.N))},n.\u0275cmp=i.Bb({type:n,selectors:[["app-create-group"]],decls:29,vars:5,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"create-group"],[1,"create-group__form"],[1,"create-group__form__avatar"],["name","people",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary",3,"click"],["position","floating"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["slot","end",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"create-group-footer"],["color","primary","expand","full",1,"create-group-footer__button",3,"click"],["name","people"],["item-start",""],[3,"src"]],template:function(n,t){1&n&&(i.Kb(0,"ion-header"),i.Kb(1,"ion-toolbar",0),i.Kb(2,"ion-buttons",1),i.Kb(3,"ion-button",2),i.Sb("click",(function(){return t.dismiss()})),i.Ib(4,"ion-icon",3),i.Jb(),i.Jb(),i.Kb(5,"ion-title"),i.lc(6,"Create Group"),i.Jb(),i.Jb(),i.Jb(),i.Kb(7,"ion-content",4),i.Kb(8,"ion-list",5),i.Kb(9,"ion-item",6),i.kc(10,l,1,0,"ion-icon",7),i.kc(11,b,2,1,"ion-avatar",8),i.Kb(12,"ion-button",9),i.Sb("click",(function(){return t.changeImage()})),i.lc(13,"Select Photo"),i.Jb(),i.Jb(),i.Kb(14,"ion-item"),i.Kb(15,"ion-label",10),i.lc(16,"Name"),i.Jb(),i.Kb(17,"ion-input",11),i.Sb("ngModelChange",(function(n){return t.group.name=n})),i.Jb(),i.Jb(),i.Kb(18,"ion-item"),i.Kb(19,"ion-label"),i.lc(20,"Public"),i.Jb(),i.Kb(21,"ion-checkbox",12),i.Sb("ngModelChange",(function(n){return t.group.public=n})),i.Jb(),i.Jb(),i.Kb(22,"ion-item"),i.Kb(23,"ion-label",10),i.lc(24,"Description"),i.Jb(),i.Kb(25,"ion-textarea",13),i.Sb("ngModelChange",(function(n){return t.group.description=n})),i.Jb(),i.Jb(),i.Jb(),i.Jb(),i.Kb(26,"ion-footer",14),i.Kb(27,"ion-button",15),i.Sb("click",(function(){return t.save()})),i.lc(28," Create "),i.Jb(),i.Jb()),2&n&&(i.xb(10),i.Xb("ngIf",!t.group.image),i.xb(1),i.Xb("ngIf",t.group.image),i.xb(6),i.Xb("ngModel",t.group.name),i.xb(4),i.Xb("ngModel",t.group.public),i.xb(4),i.Xb("ngModel",t.group.description))},directives:[a.o,a.G,a.h,a.g,a.p,a.F,a.k,a.u,a.r,u.j,a.t,a.q,a.R,p.d,p.g,a.i,a.b,a.E,a.n,a.d],styles:[".create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#000;color:#fff;margin-bottom:5px}.create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:5px}.create-group[_ngcontent-%COMP%]   .create-group__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px}"]}),n}()},yPcR:function(n,t,o){"use strict";o.d(t,"a",(function(){return _}));var e=o("AytR"),i=o("fXoL"),r=o("tyNb"),s=o("B7Rs"),c=o("a/9d"),a=o("TEn/"),g=o("ri4K"),u=o("ofXK"),p=o("3Pt+");function l(n,t){1&n&&i.Ib(0,"ion-icon",16)}function b(n,t){if(1&n&&(i.Kb(0,"ion-avatar",17),i.Ib(1,"img",18),i.Jb()),2&n){var o=i.Ub();i.xb(1),i.Xb("src",o.group.image,i.gc)}}var _=function(){function n(n,t,o,e,i,r,s,c,a){this.router=n,this.transfer=t,this.camera=o,this.loadingController=e,this.alertController=i,this.modalController=r,this.navController=s,this.authenticationService=c,this.navParams=a,this.group={};var g=this.navParams.get("group");this.group=Object.assign({},g)}return n.prototype.ngOnInit=function(){},n.prototype.dismiss=function(){this.modalController.dismiss()},n.prototype.changeImage=function(){var n=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then((function(t){var o;n.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then((function(n){o=n,n.present()}));var i=n.transfer.create(),r={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};i.upload(t,encodeURI(e.a.apiUrl+"/upload"),r).then((function(t){if(t.response){var e=JSON.parse(t.response);n.group.image=e.file}o.dismiss()}),(function(t){n.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(t),buttons:[{text:"Dismiss",role:"cancel"}]}).then((function(n){n.present()})),o.dismiss()}))}),(function(n){}))},n.prototype.update=function(){this.modalController.dismiss({group:this.group})},n.\u0275fac=function(t){return new(t||n)(i.Hb(r.g),i.Hb(s.a),i.Hb(c.a),i.Hb(a.J),i.Hb(a.a),i.Hb(a.L),i.Hb(a.M),i.Hb(g.a),i.Hb(a.N))},n.\u0275cmp=i.Bb({type:n,selectors:[["app-edit-group"]],decls:29,vars:5,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"create-group"],[1,"create-group__form"],[1,"create-group__form__avatar"],["name","people",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary",3,"click"],["position","floating"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["slot","end",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"create-group-footer"],["color","primary","expand","full",1,"create-group-footer__button",3,"click"],["name","people"],["item-start",""],[3,"src"]],template:function(n,t){1&n&&(i.Kb(0,"ion-header"),i.Kb(1,"ion-toolbar",0),i.Kb(2,"ion-buttons",1),i.Kb(3,"ion-button",2),i.Sb("click",(function(){return t.dismiss()})),i.Ib(4,"ion-icon",3),i.Jb(),i.Jb(),i.Kb(5,"ion-title"),i.lc(6,"Update Group"),i.Jb(),i.Jb(),i.Jb(),i.Kb(7,"ion-content",4),i.Kb(8,"ion-list",5),i.Kb(9,"ion-item",6),i.kc(10,l,1,0,"ion-icon",7),i.kc(11,b,2,1,"ion-avatar",8),i.Kb(12,"ion-button",9),i.Sb("click",(function(){return t.changeImage()})),i.lc(13,"Select Photo"),i.Jb(),i.Jb(),i.Kb(14,"ion-item"),i.Kb(15,"ion-label",10),i.lc(16,"Name"),i.Jb(),i.Kb(17,"ion-input",11),i.Sb("ngModelChange",(function(n){return t.group.name=n})),i.Jb(),i.Jb(),i.Kb(18,"ion-item"),i.Kb(19,"ion-label"),i.lc(20,"Public"),i.Jb(),i.Kb(21,"ion-checkbox",12),i.Sb("ngModelChange",(function(n){return t.group.public=n})),i.Jb(),i.Jb(),i.Kb(22,"ion-item"),i.Kb(23,"ion-label",10),i.lc(24,"Description"),i.Jb(),i.Kb(25,"ion-textarea",13),i.Sb("ngModelChange",(function(n){return t.group.description=n})),i.Jb(),i.Jb(),i.Jb(),i.Jb(),i.Kb(26,"ion-footer",14),i.Kb(27,"ion-button",15),i.Sb("click",(function(){return t.update()})),i.lc(28," Update "),i.Jb(),i.Jb()),2&n&&(i.xb(10),i.Xb("ngIf",!t.group.image),i.xb(1),i.Xb("ngIf",t.group.image),i.xb(6),i.Xb("ngModel",t.group.name),i.xb(4),i.Xb("ngModel",t.group.public),i.xb(4),i.Xb("ngModel",t.group.description))},directives:[a.o,a.G,a.h,a.g,a.p,a.F,a.k,a.u,a.r,u.j,a.t,a.q,a.R,p.d,p.g,a.i,a.b,a.E,a.n,a.d],styles:[""]}),n}()}}]);