(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{IYJ9:function(n,t,o){"use strict";o.d(t,"a",(function(){return a}));var e=o("AytR"),i=o("fXoL"),r=o("tk/3"),c=o("e8h1"),a=function(){function n(n,t){this.http=n,this.storage=t}return n.prototype.upgrade=function(n){var t=this;return new Promise((function(o,i){t.storage.get("go_token").then((function(r){r?t.http.post(e.a.apiUrl+"/subscriptions/start?token="+r,{id:n}).subscribe((function(n){o(n)}),(function(n){i(n)})):i()}))}))},n.prototype.cancel=function(){var n=this;return new Promise((function(t,o){n.storage.get("go_token").then((function(i){i?n.http.post(e.a.apiUrl+"/subscriptions/cancel?token="+i,{}).subscribe((function(n){t(n)}),(function(n){o(n)})):o()}))}))},n.prototype.getInvoices=function(){var n=this;return new Promise((function(t,o){n.storage.get("go_token").then((function(i){i?n.http.get(e.a.apiUrl+"/invoices?token="+i).subscribe((function(n){t(n)}),(function(n){o(n)})):o()}))}))},n.prototype.getInvoice=function(n){var t=this;return new Promise((function(o,i){t.storage.get("go_token").then((function(r){r?t.http.get(e.a.apiUrl+"/invoices/"+n+"?token="+r).subscribe((function(n){o(n)}),(function(n){i(n)})):i()}))}))},n.\u0275fac=function(t){return new(t||n)(i.Ob(r.a),i.Ob(c.b))},n.\u0275prov=i.Db({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},OAiQ:function(n,t,o){"use strict";o.d(t,"a",(function(){return _}));var e=o("mrSG"),i=o("wd/R"),r=o("AytR"),c=o("fXoL"),a=o("IYJ9"),l=o("TEn/"),s=o("ri4K"),b=o("m/P+"),f=o("e8h1"),p=o("ofXK");function u(n,t){1&n&&c.Ib(0,"ion-spinner",9)}function g(n,t){if(1&n){var o=c.Lb();c.Kb(0,"ion-button",7),c.Sb("click",(function(){return c.ec(o),c.Ub().cancelSubscription()})),c.lc(1," Cancel Subscription "),c.kc(2,u,1,0,"ion-spinner",8),c.Jb()}if(2&n){var e=c.Ub();c.Xb("disabled",e.loading),c.xb(2),c.Xb("ngIf",e.cancelLoading)}}function d(n,t){if(1&n){var o=c.Lb();c.Kb(0,"ion-item"),c.Kb(1,"ion-label",12),c.Kb(2,"h2"),c.lc(3),c.Jb(),c.Kb(4,"p"),c.lc(5),c.Jb(),c.Jb(),c.Kb(6,"ion-button",13),c.Sb("click",(function(){c.ec(o);var n=t.$implicit;return c.Ub(2).downloadInvoice(n.id)})),c.lc(7," Download "),c.Jb(),c.Jb()}if(2&n){var e=t.$implicit;c.xb(3),c.nc("Paid ",e.total,""),c.xb(2),c.nc(" ",e.date," ")}}function h(n,t){if(1&n&&(c.Kb(0,"ion-list",10),c.Kb(1,"ion-list-header"),c.lc(2," Invoices "),c.Jb(),c.kc(3,d,8,2,"ion-item",11),c.Jb()),2&n){var o=c.Ub();c.xb(3),c.Xb("ngForOf",o.invoices)}}var _=function(){function n(n,t,o,e,i,r,c){var a=this;this.billingService=n,this.modalController=t,this.alertController=o,this.authenticationService=e,this.iab=i,this.toastController=r,this.storage=c,this.user={},this.authenticationService.getUserData().subscribe((function(n){a.user=n})),this.loading=!0,this.invoices=[],this.getInvoices()}return n.prototype.ngOnInit=function(){},n.prototype.getInvoices=function(){var n=this;this.billingService.getInvoices().then((function(t){n.loading=!1,n.invoices=t}))},n.prototype.downloadInvoice=function(n){var t=this;this.storage.get("go_token").then((function(o){o&&t.iab.create(r.a.apiUrl+"/invoices/"+n+"?token="+o,"_system")}))},n.prototype.cancelSubscription=function(){return Object(e.a)(this,void 0,void 0,(function(){var n=this;return Object(e.c)(this,(function(t){switch(t.label){case 0:return[4,this.alertController.create({header:"Cancel Subscription",message:"Are you sure?",buttons:[{text:"Cancel",role:"cancel",handler:function(){}},{text:"Yes",handler:function(){n.cancelLoading=!0,n.billingService.cancel().then((function(){n.showToast("Subscription Cancelled"),n.getInvoices(),n.authenticationService.getUserData().toPromise().then((function(t){n.user=t}))})).catch((function(t){n.cancelLoading=!1,n.showToast("Failed To Cancel Subscription")}))}}]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}}))}))},n.prototype.showToast=function(n){return Object(e.a)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return[4,this.toastController.create({message:n,duration:4e3})];case 1:return t.sent().present(),[2]}}))}))},n.prototype.formatDate=function(n){return i(n).format("dddd, MMMM Do YYYY")},n.prototype.formatTime=function(n){return i(n).format("h:mma")},n.prototype.dismiss=function(){this.modalController.dismiss()},n.\u0275fac=function(t){return new(t||n)(c.Hb(a.a),c.Hb(l.L),c.Hb(l.a),c.Hb(s.a),c.Hb(b.a),c.Hb(l.S),c.Hb(f.b))},n.\u0275cmp=c.Bb({type:n,selectors:[["app-billing"]],decls:10,vars:2,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"billing"],["color","primary",3,"disabled","click",4,"ngIf"],["class","billing__billing-list",4,"ngIf"],["color","primary",3,"disabled","click"],["color","light","class","billing__cancel-spinner",4,"ngIf"],["color","light",1,"billing__cancel-spinner"],[1,"billing__billing-list"],[4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["slot","end",3,"click"]],template:function(n,t){1&n&&(c.Kb(0,"ion-header"),c.Kb(1,"ion-toolbar",0),c.Kb(2,"ion-buttons",1),c.Kb(3,"ion-button",2),c.Sb("click",(function(){return t.dismiss()})),c.Ib(4,"ion-icon",3),c.Jb(),c.Jb(),c.Kb(5,"ion-title"),c.lc(6,"Billing"),c.Jb(),c.Jb(),c.Jb(),c.Kb(7,"ion-content",4),c.kc(8,g,3,2,"ion-button",5),c.kc(9,h,4,1,"ion-list",6),c.Jb()),2&n&&(c.xb(8),c.Xb("ngIf",t.user.stripe_id&&t.user.subscription&&!t.user.subscription.ends_at),c.xb(1),c.Xb("ngIf",t.invoices&&t.invoices.length>0))},directives:[l.o,l.G,l.h,l.g,l.p,l.F,l.k,p.j,l.D,l.u,l.v,p.i,l.r,l.t],styles:[""]}),n}()},nD9t:function(n,t,o){"use strict";o.d(t,"a",(function(){return b}));var e=o("mrSG"),i=o("OAiQ"),r=o("fXoL"),c=o("TEn/"),a=o("ri4K"),l=o("m/P+"),s=o("bANG"),b=function(){function n(n,t,o,e,i,r,c){var a=this;this.plt=n,this.authenticationService=t,this.alertCtrl=o,this.iab=e,this.modalController=i,this.layerService=r,this.loadingController=c,this.user={},this.authenticationService.getUserData().subscribe((function(n){a.user=n}))}return n.prototype.ngOnInit=function(){},n.prototype.openRate=function(){this.plt.is("ios")?this.iab.create("https://apps.apple.com/us/app/","_system"):this.iab.create("https://play.google.com/store/apps/details?id=com.myoutdoors.app","_system")},n.prototype.openFollow=function(){this.iab.create("https://www.facebook.com/Getoutdoorsmapsnz","_system")},n.prototype.openEmail=function(){this.iab.create("mailto:hello@my-outdoors.co.nz","_system")},n.prototype.syncOffline=function(){this.layerService.syncOfflineData(),this.alertCtrl.create({header:"Sync Started",message:"Your offline data is syncing in the background. You can continue to use the app while the sync is in progress.",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))},n.prototype.openBilling=function(){return Object(e.a)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(t){switch(t.label){case 0:return[4,this.modalController.create({component:i.a,componentProps:{}})];case 1:return(n=t.sent()).onDidDismiss().then((function(n){})),[4,n.present()];case 2:return t.sent(),[2]}}))}))},n.prototype.openChangePassword=function(){var n=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(t){t.password&&t.confirmPassword&&t.password===t.confirmPassword?n.authenticationService.changePassword(n.user.email,t.password,t.confirmPassword).then((function(){n.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))})).catch((function(){n.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(t){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))})):n.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(t){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))}}]}).then((function(n){n.present()}))},n.prototype.logout=function(){this.authenticationService.logout()},n.prototype.dismiss=function(){this.modalController.dismiss()},n.\u0275fac=function(t){return new(t||n)(r.Hb(c.O),r.Hb(a.a),r.Hb(c.a),r.Hb(l.a),r.Hb(c.L),r.Hb(s.a),r.Hb(c.J))},n.\u0275cmp=r.Bb({type:n,selectors:[["app-settings"]],decls:45,vars:0,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"settings-list"],["detail","",3,"click"],["name","globe","slot","start"],["name","heart","slot","start"],["slot","end","fill","outline",3,"click"],["name","logo-facebook","slot","start"],["name","mail","slot","start"],["name","card","slot","start"],["name","lock-open","slot","start"],["name","lock-closed","slot","start"]],template:function(n,t){1&n&&(r.Kb(0,"ion-header"),r.Kb(1,"ion-toolbar",0),r.Kb(2,"ion-buttons",1),r.Kb(3,"ion-button",2),r.Sb("click",(function(){return t.dismiss()})),r.Ib(4,"ion-icon",3),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.lc(6,"Settings"),r.Jb(),r.Jb(),r.Jb(),r.Kb(7,"ion-content"),r.Kb(8,"ion-list",4),r.Kb(9,"ion-list-header"),r.lc(10,"Data"),r.Jb(),r.Kb(11,"ion-item",5),r.Sb("click",(function(){return t.syncOffline()})),r.Ib(12,"ion-icon",6),r.Kb(13,"ion-label"),r.lc(14,"Sync Offline Data"),r.Jb(),r.Jb(),r.Kb(15,"ion-list-header"),r.lc(16,"Support"),r.Jb(),r.Kb(17,"ion-item"),r.Ib(18,"ion-icon",7),r.lc(19," Rate The App "),r.Kb(20,"ion-button",8),r.Sb("click",(function(){return t.openRate()})),r.lc(21,"Rate"),r.Jb(),r.Jb(),r.Kb(22,"ion-item"),r.Ib(23,"ion-icon",9),r.lc(24," Follow Us "),r.Kb(25,"ion-button",8),r.Sb("click",(function(){return t.openFollow()})),r.lc(26,"Follow"),r.Jb(),r.Jb(),r.Kb(27,"ion-item"),r.Ib(28,"ion-icon",10),r.lc(29," Contact Support "),r.Kb(30,"ion-button",8),r.Sb("click",(function(){return t.openEmail()})),r.lc(31,"Email"),r.Jb(),r.Jb(),r.Kb(32,"ion-list-header"),r.lc(33,"Account Settings"),r.Jb(),r.Kb(34,"ion-item",5),r.Sb("click",(function(){return t.openBilling()})),r.Ib(35,"ion-icon",11),r.Kb(36,"ion-label"),r.lc(37,"Billing"),r.Jb(),r.Jb(),r.Kb(38,"ion-item",5),r.Sb("click",(function(){return t.openChangePassword()})),r.Ib(39,"ion-icon",12),r.Kb(40,"ion-label"),r.lc(41,"Change Password"),r.Jb(),r.Jb(),r.Kb(42,"ion-item",2),r.Sb("click",(function(){return t.logout()})),r.Ib(43,"ion-icon",13),r.lc(44," Logout "),r.Jb(),r.Jb(),r.Jb())},directives:[c.o,c.G,c.h,c.g,c.p,c.F,c.k,c.u,c.v,c.r,c.t],styles:[".settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:20px;padding-top:10px}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]:first-child{margin-top:0;padding-top:0}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:0}.settings-list[_ngcontent-%COMP%]   ion-icon[name=trophy][_ngcontent-%COMP%]{color:#ffbf00}.settings-list[_ngcontent-%COMP%]   ion-icon[name=heart][_ngcontent-%COMP%]{color:#e31b23}.settings-list[_ngcontent-%COMP%]   ion-icon[name=logo-facebook][_ngcontent-%COMP%]{color:#1778f2}.settings-list[_ngcontent-%COMP%]   ion-icon[name=logo-twitter][_ngcontent-%COMP%]{color:#1da1f2}.settings-list[_ngcontent-%COMP%]   ion-icon[name=mail][_ngcontent-%COMP%]{color:#444}.settings-list[_ngcontent-%COMP%]   ion-icon[name=lock-open][_ngcontent-%COMP%]{color:#d6a000}.settings-list[_ngcontent-%COMP%]   ion-icon[name=lock-closed][_ngcontent-%COMP%]{color:#d47835}.settings-list[_ngcontent-%COMP%]   ion-icon[name=cloud-upload][_ngcontent-%COMP%]{color:#8cd0ef}.settings-list[_ngcontent-%COMP%]   ion-icon[name=locate][_ngcontent-%COMP%]{color:#90e483}"]}),n}()},uxLX:function(n,t,o){"use strict";o.d(t,"a",(function(){return B}));var e=o("mrSG"),i=o("AytR"),r=o("fXoL"),c=o("tyNb"),a=o("B7Rs"),l=o("a/9d"),s=o("TEn/"),b=o("ri4K"),f=o("ofXK"),p=o("3Pt+");function u(n,t){1&n&&r.Ib(0,"ion-icon",20)}function g(n,t){if(1&n&&(r.Kb(0,"ion-avatar",21),r.Ib(1,"img",22),r.Jb()),2&n){var o=r.Ub();r.xb(1),r.Xb("src",o.profile.avatar,r.gc)}}function d(n,t){if(1&n&&(r.Kb(0,"ion-select-option",23),r.lc(1),r.Jb()),2&n){var o=t.$implicit;r.Xb("value",o),r.xb(1),r.mc(o)}}function h(n,t){if(1&n&&(r.Kb(0,"p",24),r.lc(1),r.Jb()),2&n){var o=r.Ub();r.xb(1),r.mc(o.profile.error)}}function _(n,t){1&n&&r.Ib(0,"ion-icon",25)}function m(n,t){1&n&&r.Ib(0,"ion-spinner")}var v=function(){function n(n,t,o,e,i,r,c,a,l){this.router=n,this.transfer=t,this.camera=o,this.loadingController=e,this.alertController=i,this.modalController=r,this.navController=c,this.authenticationService=a,this.navParams=l;var s=this.navParams.get("profile");this.profile=Object.assign({},s),this.countries=["New Zealand","Australia"],console.log(this.profile)}return n.prototype.ngOnInit=function(){},n.prototype.dismiss=function(){this.modalController.dismiss()},n.prototype.changeImage=function(){var n=this;this.camera.getPicture({sourceType:this.camera.PictureSourceType.PHOTOLIBRARY,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,quality:25}).then((function(t){var o;n.loadingController.create({message:"Your image is being uploaded. Please wait...",duration:2e4}).then((function(n){o=n,n.present()}));var e=n.transfer.create(),r={fileKey:"media_file",fileName:Math.random().toString(36).substring(2),params:{},mimeType:"image/jpeg"};e.upload(t,encodeURI(i.a.apiUrl+"/upload"),r).then((function(t){if(t.response){var e=JSON.parse(t.response);n.profile.avatar=e.file}o.dismiss()}),(function(t){n.alertController.create({header:"Error",subHeader:"There was a problem uploading your image",message:JSON.stringify(t),buttons:[{text:"Dismiss",role:"cancel"}]}).then((function(n){n.present()})),o.dismiss()}))}),(function(n){}))},n.prototype.save=function(){this.modalController.dismiss(this.profile)},n.\u0275fac=function(t){return new(t||n)(r.Hb(c.g),r.Hb(a.a),r.Hb(l.a),r.Hb(s.J),r.Hb(s.a),r.Hb(s.L),r.Hb(s.M),r.Hb(b.a),r.Hb(s.N))},n.\u0275cmp=r.Bb({type:n,selectors:[["app-edit-profile"]],decls:41,vars:12,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"edit-profile"],[1,"edit-profile__form"],[1,"edit-profile__form__avatar"],["name","person",4,"ngIf"],["item-start","",4,"ngIf"],["color","primary",3,"click"],["position","floating"],["clearInput","","type","text",3,"ngModel","ngModelChange"],["placeholder","Select Date",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","signup__form__error",4,"ngIf"],[1,"signup-footer"],["color","primary","expand","full",1,"signup-footer__button",3,"disabled","click"],["name","arrow-forward",4,"ngIf"],[4,"ngIf"],["name","person"],["item-start",""],[3,"src"],[3,"value"],[1,"signup__form__error"],["name","arrow-forward"]],template:function(n,t){1&n&&(r.Kb(0,"ion-header"),r.Kb(1,"ion-toolbar",0),r.Kb(2,"ion-buttons",1),r.Kb(3,"ion-button",2),r.Sb("click",(function(){return t.dismiss()})),r.Ib(4,"ion-icon",3),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.lc(6,"Edit Profile"),r.Jb(),r.Jb(),r.Jb(),r.Kb(7,"ion-content",4),r.Kb(8,"ion-list",5),r.Kb(9,"ion-item",6),r.kc(10,u,1,0,"ion-icon",7),r.kc(11,g,2,1,"ion-avatar",8),r.Kb(12,"ion-button",9),r.Sb("click",(function(){return t.changeImage()})),r.lc(13,"Select Photo"),r.Jb(),r.Jb(),r.Kb(14,"ion-item"),r.Kb(15,"ion-label",10),r.lc(16,"Name"),r.Jb(),r.Kb(17,"ion-input",11),r.Sb("ngModelChange",(function(n){return t.profile.name=n})),r.Jb(),r.Jb(),r.Kb(18,"ion-item"),r.Kb(19,"ion-label",10),r.lc(20,"Gender"),r.Jb(),r.Kb(21,"ion-input",11),r.Sb("ngModelChange",(function(n){return t.profile.gender=n})),r.Jb(),r.Jb(),r.Kb(22,"ion-item"),r.Kb(23,"ion-label",10),r.lc(24,"Start Date"),r.Jb(),r.Kb(25,"ion-datetime",12),r.Sb("ngModelChange",(function(n){return t.profile.dob=n})),r.Jb(),r.Jb(),r.Kb(26,"ion-item"),r.Kb(27,"ion-label",10),r.lc(28,"Location"),r.Jb(),r.Kb(29,"ion-select",13),r.Sb("ngModelChange",(function(n){return t.profile.location=n})),r.kc(30,d,2,2,"ion-select-option",14),r.Jb(),r.Jb(),r.Kb(31,"ion-item"),r.Kb(32,"ion-label",10),r.lc(33,"Biography"),r.Jb(),r.Kb(34,"ion-textarea",13),r.Sb("ngModelChange",(function(n){return t.profile.biography=n})),r.Jb(),r.Jb(),r.kc(35,h,2,1,"p",15),r.Jb(),r.Jb(),r.Kb(36,"ion-footer",16),r.Kb(37,"ion-button",17),r.Sb("click",(function(){return t.save()})),r.lc(38," Save\xa0\xa0 "),r.kc(39,_,1,0,"ion-icon",18),r.kc(40,m,1,0,"ion-spinner",19),r.Jb(),r.Jb()),2&n&&(r.xb(10),r.Xb("ngIf",!t.profile.avatar),r.xb(1),r.Xb("ngIf",t.profile.avatar),r.xb(6),r.Xb("ngModel",t.profile.name),r.xb(4),r.Xb("ngModel",t.profile.gender),r.xb(4),r.Xb("ngModel",t.profile.dob),r.xb(4),r.Xb("ngModel",t.profile.location),r.xb(1),r.Xb("ngForOf",t.countries),r.xb(4),r.Xb("ngModel",t.profile.biography),r.xb(1),r.Xb("ngIf",t.profile.error),r.xb(2),r.Xb("disabled",t.profile.loading),r.xb(2),r.Xb("ngIf",!t.profile.loading),r.xb(1),r.Xb("ngIf",t.profile.loading))},directives:[s.o,s.G,s.h,s.g,s.p,s.F,s.k,s.u,s.r,f.j,s.t,s.q,s.R,p.d,p.g,s.l,s.Q,s.B,f.i,s.E,s.n,s.d,s.C,s.D],styles:[".edit-profile[_ngcontent-%COMP%]   .edit-profile__form__avatar[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.edit-profile[_ngcontent-%COMP%]   .edit-profile__form__avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:20px;height:20px;padding:10px;border-radius:20px;background-color:#000;color:#fff;margin-bottom:5px}.edit-profile[_ngcontent-%COMP%]   .edit-profile__form__avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-bottom:5px}.edit-profile[_ngcontent-%COMP%]   .edit-profile__form__avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:15px}"]}),n}(),C=o("nD9t"),P=o("wd/R"),O=o("tk/3"),M=o("e8h1"),J=function(){function n(n,t){this.http=n,this.storage=t}return n.prototype.getProfile=function(n){var t=this;return new Promise((function(o,e){t.storage.get("go_token").then((function(r){r?t.http.get(i.a.apiUrl+"/profiles/"+n+"?token="+r).subscribe((function(e){t.storage.set("go_profile"+n,e),o(e)}),(function(i){t.storage.get("go_profile"+n).then((function(n){n?o(n):e(i)}))})):e()}))}))},n.prototype.updateProfile=function(n){var t=this;return new Promise((function(o,e){t.storage.get("go_token").then((function(r){r?t.http.put(i.a.apiUrl+"/profiles/"+n.user_id+"?token="+r,n).subscribe((function(n){o(n)}),(function(n){e(n)})):e()}))}))},n.\u0275fac=function(t){return new(t||n)(r.Ob(O.a),r.Ob(M.b))},n.\u0275prov=r.Db({token:n,factory:n.\u0275fac,providedIn:"root"}),n}();function K(n,t){if(1&n){var o=r.Lb();r.Kb(0,"ion-buttons",10),r.Kb(1,"ion-button",3),r.Sb("click",(function(){return r.ec(o),r.Ub().editSettings()})),r.lc(2," Settings "),r.Jb(),r.Jb()}}function k(n,t){1&n&&(r.Kb(0,"div",11),r.Ib(1,"ion-spinner",1),r.Jb())}function x(n,t){if(1&n){var o=r.Lb();r.Kb(0,"ion-icon",16),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.Jb()}}function y(n,t){if(1&n){var o=r.Lb();r.Kb(0,"ion-avatar",17),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.Ib(1,"img",18),r.Jb()}if(2&n){var e=r.Ub(2);r.xb(1),r.Xb("src",e.profile.avatar,r.gc)}}function I(n,t){if(1&n){var o=r.Lb();r.Kb(0,"h1",3),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.lc(1),r.Jb()}if(2&n){var e=r.Ub(2);r.xb(1),r.mc(e.profile.name)}}function w(n,t){if(1&n&&(r.Kb(0,"div",12),r.kc(1,x,1,0,"ion-icon",13),r.kc(2,y,2,1,"ion-avatar",14),r.kc(3,I,2,1,"h1",15),r.Jb()),2&n){var o=r.Ub();r.xb(1),r.Xb("ngIf",!o.profile||!o.profile.avatar),r.xb(1),r.Xb("ngIf",o.profile&&o.profile.avatar),r.xb(1),r.Xb("ngIf",o.profile.name)}}function S(n,t){1&n&&(r.Kb(0,"a"),r.lc(1,"Change "),r.Ib(2,"ion-icon",26),r.Jb())}function X(n,t){if(1&n){var o=r.Lb();r.Kb(0,"div",23),r.Kb(1,"div",24),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.Kb(2,"h5"),r.lc(3,"Name"),r.Jb(),r.kc(4,S,3,0,"a",25),r.Jb(),r.Kb(5,"p"),r.lc(6),r.Jb(),r.Jb()}if(2&n){var e=r.Ub(2);r.xb(4),r.Xb("ngIf",e.user.id===e.profile.user_id),r.xb(2),r.nc(" ",e.profile.name," ")}}function U(n,t){1&n&&(r.Kb(0,"a"),r.lc(1,"Change "),r.Ib(2,"ion-icon",26),r.Jb())}function D(n,t){if(1&n){var o=r.Lb();r.Kb(0,"div",23),r.Kb(1,"div",24),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.Kb(2,"h5"),r.lc(3,"Gender"),r.Jb(),r.kc(4,U,3,0,"a",25),r.Jb(),r.Kb(5,"p"),r.lc(6),r.Jb(),r.Jb()}if(2&n){var e=r.Ub(2);r.xb(4),r.Xb("ngIf",e.user.id===e.profile.user_id),r.xb(2),r.nc(" ",e.profile.gender," ")}}function H(n,t){1&n&&(r.Kb(0,"a"),r.lc(1,"Change "),r.Ib(2,"ion-icon",26),r.Jb())}function L(n,t){if(1&n){var o=r.Lb();r.Kb(0,"div",23),r.Kb(1,"div",24),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.Kb(2,"h5"),r.lc(3,"Date of Birth"),r.Jb(),r.kc(4,H,3,0,"a",25),r.Jb(),r.Kb(5,"p"),r.lc(6),r.Jb(),r.Jb()}if(2&n){var e=r.Ub(2);r.xb(4),r.Xb("ngIf",e.user.id===e.profile.user_id),r.xb(2),r.nc(" ",e.formatDate(e.profile.dob)," ")}}function T(n,t){1&n&&(r.Kb(0,"a"),r.lc(1,"Change "),r.Ib(2,"ion-icon",26),r.Jb())}function j(n,t){if(1&n){var o=r.Lb();r.Kb(0,"div",27),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.Kb(1,"div",28),r.Kb(2,"h5"),r.lc(3,"Location"),r.Jb(),r.kc(4,T,3,0,"a",25),r.Jb(),r.Kb(5,"p"),r.lc(6),r.Jb(),r.Jb()}if(2&n){var e=r.Ub(2);r.xb(4),r.Xb("ngIf",e.user.id===e.profile.user_id),r.xb(2),r.nc(" ",e.profile.location," ")}}function F(n,t){1&n&&(r.Kb(0,"a"),r.lc(1,"Change "),r.Ib(2,"ion-icon",26),r.Jb())}function Y(n,t){if(1&n){var o=r.Lb();r.Kb(0,"div",27),r.Sb("click",(function(){return r.ec(o),r.Ub(2).editProfile()})),r.Kb(1,"div",28),r.Kb(2,"h5"),r.lc(3,"Biography"),r.Jb(),r.kc(4,F,3,0,"a",25),r.Jb(),r.Kb(5,"p"),r.lc(6),r.Jb(),r.Jb()}if(2&n){var e=r.Ub(2);r.xb(4),r.Xb("ngIf",e.user.id===e.profile.user_id),r.xb(2),r.nc(" ",e.profile.biography," ")}}function R(n,t){if(1&n&&(r.Kb(0,"div",19),r.Kb(1,"div",20),r.kc(2,X,7,2,"div",21),r.kc(3,D,7,2,"div",21),r.kc(4,L,7,2,"div",21),r.kc(5,j,7,2,"div",22),r.kc(6,Y,7,2,"div",22),r.Jb(),r.Jb()),2&n){var o=r.Ub();r.xb(2),r.Xb("ngIf",o.profile.name),r.xb(1),r.Xb("ngIf",o.profile.gender),r.xb(1),r.Xb("ngIf",o.profile.dob),r.xb(1),r.Xb("ngIf",o.profile.location),r.xb(1),r.Xb("ngIf",o.profile.biography)}}var B=function(){function n(n,t,o,e){var i=this;this.authenticationService=n,this.modalController=t,this.navParams=o,this.profileService=e,this.loading=!0,this.user={profile:{}};var r=this.navParams.get("profile");this.profile={},this.authenticationService.getUserData().subscribe((function(n){i.user=n,console.log(i.user),i.user.id===r&&console.log(i.profile),i.getProfile(r)}))}return n.prototype.ngOnInit=function(){},n.prototype.getProfile=function(n){var t=this;this.profileService.getProfile(n).then((function(n){t.profile=n,t.loading=!1})).catch((function(){}))},n.prototype.updateProfile=function(){var n=this;this.authenticationService.updateProfile(this.user.profile).then((function(){n.authenticationService.retreiveUserData().then((function(){}))}))},n.prototype.editProfile=function(){return Object(e.a)(this,void 0,void 0,(function(){var n,t=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return this.user.id!==this.profile.user_id&&(this.user.profile.email=this.user.email),[4,this.modalController.create({component:v,componentProps:{profile:Object.assign({},this.user.profile)}})];case 1:return(n=o.sent()).onDidDismiss().then((function(n){n&&n.data&&(Object.assign(t.user.profile,n.data),t.user.email=t.user.profile.email,t.updateProfile())})),[4,n.present()];case 2:return o.sent(),[2]}}))}))},n.prototype.editSettings=function(){return Object(e.a)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(t){switch(t.label){case 0:return[4,this.modalController.create({component:C.a,componentProps:{}})];case 1:return(n=t.sent()).onDidDismiss().then((function(n){})),[4,n.present()];case 2:return t.sent(),[2]}}))}))},n.prototype.dismiss=function(){this.modalController.dismiss()},n.prototype.formatDate=function(n){return P(n).format("DD/MM/YYYY")},n.\u0275fac=function(t){return new(t||n)(r.Hb(b.a),r.Hb(s.L),r.Hb(s.N),r.Hb(J))},n.\u0275cmp=r.Bb({type:n,selectors:[["app-profile"]],decls:12,vars:4,consts:[[1,"ion-no-border"],["color","primary"],["slot","start"],[3,"click"],["name","close"],["slot","end",4,"ngIf"],["fullscreen","true",1,"profile"],["class","profile__loading",4,"ngIf"],["class","profile__header",4,"ngIf"],["class","profile__info",4,"ngIf"],["slot","end"],[1,"profile__loading"],[1,"profile__header"],["name","person",3,"click",4,"ngIf"],["item-start","",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["name","person",3,"click"],["item-start","",3,"click"],[3,"src"],[1,"profile__info"],[1,"profile__about"],["class","profile__about__item",4,"ngIf"],["class","profile__about__item",3,"click",4,"ngIf"],[1,"profile__about__item"],[1,"profile__about__item__title",3,"click"],[4,"ngIf"],["name","ios-arrow-forward","size","small"],[1,"profile__about__item",3,"click"],[1,"profile__about__item__title"]],template:function(n,t){1&n&&(r.Kb(0,"ion-header",0),r.Kb(1,"ion-toolbar",1),r.Kb(2,"ion-buttons",2),r.Kb(3,"ion-button",3),r.Sb("click",(function(){return t.dismiss()})),r.Ib(4,"ion-icon",4),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.lc(6,"Profile"),r.Jb(),r.kc(7,K,3,0,"ion-buttons",5),r.Jb(),r.Jb(),r.Kb(8,"ion-content",6),r.kc(9,k,2,0,"div",7),r.kc(10,w,4,3,"div",8),r.kc(11,R,7,5,"div",9),r.Jb()),2&n&&(r.xb(7),r.Xb("ngIf",t.user.id===t.profile.user_id),r.xb(2),r.Xb("ngIf",t.loading),r.xb(1),r.Xb("ngIf",!t.loading),r.xb(1),r.Xb("ngIf",!t.loading))},directives:[s.o,s.G,s.h,s.g,s.p,s.F,f.j,s.k,s.D,s.d],styles:[".profile[_ngcontent-%COMP%]   .profile__loading[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:60px;text-align:center}.profile[_ngcontent-%COMP%]   .profile__loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto;width:30px;height:30px}.profile[_ngcontent-%COMP%]   .profile__header[_ngcontent-%COMP%]{height:300px;background-color:#ff7f00;text-align:center;margin-bottom:0;color:#fff;padding-top:40px;position:relative;z-index:0}.profile[_ngcontent-%COMP%]   .profile__header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{background-color:#fff;color:#000;width:80px;height:80px;font-size:80px;border-radius:55px;padding:15px}.profile[_ngcontent-%COMP%]   .profile__header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:110px;height:110px;display:block;margin:0 auto}.profile[_ngcontent-%COMP%]   .profile__header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]{top:-40px;background-color:#fff;z-index:1;position:relative;border-top-left-radius:10px;border-top-right-radius:10px}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]{padding:10px 30px}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;text-transform:uppercase;font-weight:600;letter-spacing:3px}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]   .profile__about__item[_ngcontent-%COMP%]{margin-top:25px}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]   .profile__about__item[_ngcontent-%COMP%]   .profile__about__item__title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:inline-block;margin:0}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]   .profile__about__item[_ngcontent-%COMP%]   .profile__about__item__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:right;color:#f25b26}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]   .profile__about__item[_ngcontent-%COMP%]   .profile__about__item__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:22px;vertical-align:top}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]   .profile__about__item[_ngcontent-%COMP%]   .profile__about__item__title[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{float:right;margin-top:-10px}.profile[_ngcontent-%COMP%]   .profile__info[_ngcontent-%COMP%]   .profile__about[_ngcontent-%COMP%]   .profile__about__item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.7;margin:10px 0 0;font-size:14px}"]}),n}()}}]);