(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{KXRs:function(t,n,o){"use strict";o.d(n,"a",(function(){return f}));var e=o("mrSG"),i=o("OSM0"),r=o("fXoL"),s=o("TEn/"),u=o("ri4K"),c=o("ohih"),a=o("ofXK");function p(t,n){1&t&&(r.Kb(0,"div",9),r.Ib(1,"ion-spinner",0),r.Jb())}function g(t,n){1&t&&(r.Kb(0,"span"),r.lc(1,"s"),r.Jb())}function b(t,n){if(1&t){var o=r.Lb();r.Kb(0,"ion-item"),r.Kb(1,"ion-label",10),r.Kb(2,"h2"),r.lc(3),r.Jb(),r.Kb(4,"p"),r.lc(5),r.kc(6,g,2,0,"span",11),r.Jb(),r.Jb(),r.Kb(7,"ion-button",12),r.Sb("click",(function(){r.ec(o);var t=n.$implicit;return r.Ub().joinGroup(t)})),r.lc(8," Join "),r.Jb(),r.Jb()}if(2&t){var e=n.$implicit;r.xb(3),r.mc(e.name),r.xb(2),r.nc(" ",e.participants.length," participant"),r.xb(1),r.Xb("ngIf",1!==e.participants.length)}}var f=function(){function t(t,n,o,e,i,r,s,u){this.loadingController=t,this.alertController=n,this.modalController=o,this.navController=e,this.authenticationService=i,this.navParams=r,this.groupService=s,this.toastController=u,this.groups=[],this.loading=!0,this.getInvites()}return t.prototype.ngOnInit=function(){},t.prototype.getInvites=function(){var t=this;this.groupService.getInvitedGroups().then((function(n){t.groups=n,t.loading=!1})).catch((function(){t.loading=!1}))},t.prototype.joinGroup=function(t){var n=this;this.groupService.joinGroup(t.id).then((function(){n.join(t.id)}))},t.prototype.join=function(t){this.modalController.dismiss({group_id:t})},t.prototype.dismiss=function(){this.modalController.dismiss()},t.prototype.inviteUser=function(){return Object(e.a)(this,void 0,void 0,(function(){var t,n=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,this.modalController.create({component:i.a,componentProps:{}})];case 1:return(t=o.sent()).onDidDismiss().then((function(t){t&&t.data&&n.groupService.inviteUser(t.data.user).then((function(){n.showToast("Invitation sent!")}))})),[4,t.present()];case 2:return o.sent(),[2]}}))}))},t.prototype.showToast=function(t){return Object(e.a)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(n){switch(n.label){case 0:return[4,this.toastController.create({message:t,duration:2e3})];case 1:return n.sent().present(),[2]}}))}))},t.\u0275fac=function(n){return new(n||t)(r.Hb(s.J),r.Hb(s.a),r.Hb(s.L),r.Hb(s.M),r.Hb(u.a),r.Hb(s.N),r.Hb(c.a),r.Hb(s.S))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-group-invites"]],decls:14,vars:2,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],["slot","end"],[1,"group-invites"],["class","group-invites__loading",4,"ngIf"],[1,"group-invites__list"],[4,"ngFor","ngForOf"],[1,"group-invites__loading"],[1,"ion-text-wrap"],[4,"ngIf"],["slot","end",3,"click"]],template:function(t,n){1&t&&(r.Kb(0,"ion-header"),r.Kb(1,"ion-toolbar",0),r.Kb(2,"ion-buttons",1),r.Kb(3,"ion-button",2),r.Sb("click",(function(){return n.dismiss()})),r.Ib(4,"ion-icon",3),r.Jb(),r.Jb(),r.Kb(5,"ion-title"),r.lc(6,"Pending Invitations"),r.Jb(),r.Kb(7,"ion-buttons",4),r.Kb(8,"ion-button",2),r.Sb("click",(function(){return n.inviteUser()})),r.lc(9," Invite User "),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(10,"ion-content",5),r.kc(11,p,2,0,"div",6),r.Kb(12,"ion-list",7),r.kc(13,b,9,3,"ion-item",8),r.Jb(),r.Jb()),2&t&&(r.xb(11),r.Xb("ngIf",n.loading),r.xb(2),r.Xb("ngForOf",n.groups))},directives:[s.o,s.G,s.h,s.g,s.p,s.F,s.k,a.j,s.u,a.i,s.D,s.r,s.t],styles:[".group-invites[_ngcontent-%COMP%]   .group-invites__loading[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:60px;text-align:center}.group-invites[_ngcontent-%COMP%]   .group-invites__loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto;width:30px;height:30px}"]}),t}()},OSM0:function(t,n,o){"use strict";o.d(n,"a",(function(){return a}));var e=o("fXoL"),i=o("TEn/"),r=o("ohih"),s=o("3Pt+"),u=o("ofXK");function c(t,n){if(1&t&&(e.Kb(0,"ion-select-option",11),e.lc(1),e.Jb()),2&t){var o=n.$implicit;e.Xb("value",o.id),e.xb(1),e.mc(o.name)}}var a=function(){function t(t,n){var o=this;this.modalController=t,this.groupService=n,this.user={},this.groups=[],this.groupService.getJoinedGroups().then((function(t){o.groups=t}))}return t.prototype.ngOnInit=function(){},t.prototype.dismiss=function(){this.modalController.dismiss()},t.prototype.invite=function(){this.modalController.dismiss({user:this.user})},t.\u0275fac=function(n){return new(n||t)(e.Hb(i.L),e.Hb(r.a))},t.\u0275cmp=e.Bb({type:t,selectors:[["app-invite-user"]],decls:20,vars:3,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],[1,"invite-user"],["position","floating"],["type","text","name","email",3,"ngModel","ngModelChange"],["name","group",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"invite-user-footer"],["color","primary","expand","full",1,"invite-user-footer__button",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.Kb(0,"ion-header"),e.Kb(1,"ion-toolbar",0),e.Kb(2,"ion-buttons",1),e.Kb(3,"ion-button",2),e.Sb("click",(function(){return n.dismiss()})),e.Ib(4,"ion-icon",3),e.Jb(),e.Jb(),e.Kb(5,"ion-title"),e.lc(6,"Invite User"),e.Jb(),e.Jb(),e.Jb(),e.Kb(7,"ion-content",4),e.Kb(8,"ion-item"),e.Kb(9,"ion-label",5),e.lc(10,"Email"),e.Jb(),e.Kb(11,"ion-input",6),e.Sb("ngModelChange",(function(t){return n.user.email=t})),e.Jb(),e.Jb(),e.Kb(12,"ion-item"),e.Kb(13,"ion-label",5),e.lc(14,"Group"),e.Jb(),e.Kb(15,"ion-select",7),e.Sb("ngModelChange",(function(t){return n.user.group_id=t})),e.kc(16,c,2,2,"ion-select-option",8),e.Jb(),e.Jb(),e.Jb(),e.Kb(17,"ion-footer",9),e.Kb(18,"ion-button",10),e.Sb("click",(function(){return n.invite()})),e.lc(19," Invite "),e.Jb(),e.Jb()),2&t&&(e.xb(11),e.Xb("ngModel",n.user.email),e.xb(4),e.Xb("ngModel",n.user.group_id),e.xb(1),e.Xb("ngForOf",n.groups))},directives:[i.o,i.G,i.h,i.g,i.p,i.F,i.k,i.r,i.t,i.q,i.R,s.d,s.g,i.B,i.Q,u.i,i.n,i.C],styles:[""]}),t}()},evrW:function(t,n,o){"use strict";o.r(n),o.d(n,"GroupInvitesPageModule",(function(){return g}));var e=o("ofXK"),i=o("3Pt+"),r=o("TEn/"),s=o("tyNb"),u=o("KXRs"),c=o("fXoL"),a=[{path:"",component:u.a}],p=function(){function t(){}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(n){return new(n||t)},imports:[[s.j.forChild(a)],s.j]}),t}(),g=function(){function t(){}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(n){return new(n||t)},imports:[[e.b,i.a,r.H,p]]}),t}()},ohih:function(t,n,o){"use strict";o.d(n,"a",(function(){return c}));var e=o("AytR"),i=o("2Vo4"),r=o("fXoL"),s=o("tk/3"),u=o("e8h1"),c=function(){function t(t,n){this.http=t,this.storage=n,this.currentGroup=new i.a({})}return t.prototype.getGroups=function(t,n){var o=this;return new Promise((function(i,r){o.storage.get("go_token").then((function(s){s?o.http.get(e.a.apiUrl+"/groups?token="+s+"&page="+n+"&search="+t).subscribe((function(t){o.storage.set("go_groups",t),i(t)}),(function(t){o.storage.get("go_groups").then((function(n){n?i(n):r(t)}))})):r()}))}))},t.prototype.getJoinedGroups=function(){var t=this;return new Promise((function(n,o){t.storage.get("go_token").then((function(i){i?t.http.get(e.a.apiUrl+"/groups?token="+i+"&joined=1").subscribe((function(o){t.storage.set("go_joinedgroups",o),n(o)}),(function(e){t.storage.get("go_joinedgroups").then((function(t){t?n(t):o(e)}))})):o()}))}))},t.prototype.getInvitedGroups=function(){var t=this;return new Promise((function(n,o){t.storage.get("go_token").then((function(i){i?t.http.get(e.a.apiUrl+"/groups?token="+i+"&invited=1").subscribe((function(o){t.storage.set("go_invitedgroups",o),n(o)}),(function(e){t.storage.get("go_invitedgroups").then((function(t){t?n(t):o(e)}))})):o()}))}))},t.prototype.getGroup=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.get(e.a.apiUrl+"/groups/"+t+"?token="+r).subscribe((function(e){n.storage.set("go_group"+t,e),o(e)}),(function(e){n.storage.get("go_group"+t).then((function(t){t?o(t):i(e)}))})):i()}))}))},t.prototype.createGroup=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.post(e.a.apiUrl+"/groups?token="+r,t).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.editGroup=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.put(e.a.apiUrl+"/groups/"+t.id+"?token="+r,t).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.joinGroup=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.post(e.a.apiUrl+"/joingroup?token="+r,{group_id:t}).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.inviteUser=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.post(e.a.apiUrl+"/invitegroup?token="+r,t).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.leaveGroup=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.post(e.a.apiUrl+"/leavegroup?token="+r,{group_id:t}).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.getMessages=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.get(e.a.apiUrl+"/groupmessages/"+t+"?token="+r).subscribe((function(e){n.storage.set("go_messages"+t,e),o(e)}),(function(e){n.storage.get("go_messages"+t).then((function(t){t?o(t):i(e)}))})):i()}))}))},t.prototype.createMessage=function(t){var n=this;return new Promise((function(o,i){n.storage.get("go_token").then((function(r){r?n.http.post(e.a.apiUrl+"/groupmessages?token="+r,t).subscribe((function(t){o(t)}),(function(t){i(t)})):i()}))}))},t.prototype.subscribeCurrentGroup=function(){return this.currentGroup.asObservable()},t.prototype.getCurrentGroup=function(){var t=this;return new Promise((function(n,o){t.storage.get("go_currentgroup").then((function(t){t?n(t):o()}))}))},t.prototype.setCurrentGroup=function(t){this.storage.set("go_currentgroup",t),this.currentGroup.next(t)},t.\u0275fac=function(n){return new(n||t)(r.Ob(s.a),r.Ob(u.b))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);